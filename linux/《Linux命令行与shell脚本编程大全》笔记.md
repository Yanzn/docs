# 《Linux命令行与shell脚本编程大全》笔记

Linux的组成：
 - Linux内核
 - GNU工具
 - 图形化桌面环境
 - 应用软件 

---

## Linux 内核  
内核功能：
- 系统内存管理
- 软件程序管理
- 硬件设备管理
- 文件系统管理  

**系统内存管理**    
通过硬盘上的存储空间实现虚拟内存，这块空间称为交换空间 （swap space）。  
内核管理虚拟内存和物理内存。  
内存把一段时间未访问的内存单元数据复制到交换空间（换出 swapping out）。  
访问已被换出到虚拟内存的内容时，再将其复制到物理内存。
物理内存与虚拟内存的换入换出过程会花费时间，拖慢运行中的进程。  
内核在虚拟内存和物理内存之间交换内容，使得系统拥有比物理内存更多的可用内存。    

**软件程序管理**   
内核创建第一个进程（init进程）来启动其他所有进程。  
内核启动时将init进程加载到虚拟内存。  
内核启动其他进程时，会在虚拟内存中给要启动的进程分配一块专有空间，来存储该进程用到的数据和代码。  
init采用了运行级，基于控制台的程序运行级是3，图形桌面环境的系统运行级是5。  

**硬件设备管理**  
Linux系统将硬件设备当成特殊的文件，称为设备文件。

**文件系统管理**  
Linux通过支持不同类型的文件系统从硬盘读写数据。  
内核采用虚拟文件系统（Virtual File System，VFS）作为和每个文件系统交互的标准接口。  

## GNU工具
- GNU coreutils
  - 操作文本的工具
  - 操作文件的工具
  - 管理进程的工具
- shell

---

## shell

**启动shell**
用户登录，会根据 `/etc/passwd` 文件加载配置，启动对应的`shell`，如下配置了`/bin/bash`，登陆后会启动 `bash shell`。  
``yzn:x:1000:1000:yzn,,,:/home/yzn:/bin/bash``    

`man` 命令访问程序或命令的说明。  

---

## Linux文件系统
Linux将所有挂载盘的文件都纳入到同一个虚拟目录中。  
Linux PC上安装的第一块硬盘称为根驱动器。  
根驱动器包含虚拟目录的核心，其他目录都是从这里开始构建的。  
Linux会在根驱动器创建特殊目录作为挂载点，即额外存储设备的目录。  

常见的虚拟目录名：
| 目录      | 用途 |
| ----------- | ----------- |
| `/ `        |虚拟目录的根目录|
| `/bin`      |二进制目录，存放很多用户级的GNU工具|
| `/sbin`     |系统二进制目录，存放管理员级GNU工具|
| `/boot`     |启动目录，存放启动文件|
| `/etc`      |系统配置文件目录|
| `/home`     |主目录，Linux在这里创建用户目录|
| `/usr`      |用户二进制目录，用户级的GNU工具和数据文件|
| `/tmp`      |临时文件夹|
| `/opt`      |可选目录，常用语存放第三方软件包和数据文件|
| `/mnt`      |挂载目录|
| `/lib`      |库文件目录|
| `/dev`      |设备目录，存放设备节点|

**遍历目录**
- 单点符 `.` ，表示当前目录
- 双点符`..` ，表示当前目录的上级目录
- 波浪符 `~` ，表示用户目录

**`ls` 命令**

- 输出的列表按照名称正序排列
- `-F` 参数用于区分目录和文件
- `-a` 参数用于显示隐藏文件
- `-R` 参数用于递归显示所有子目录的文件
- 命令参数可以合并
- `-l` 参数产生长列表格式输出
- 过滤输出列表
  - 问号`?` 代表一个字符
  - 星号`*` 代表多个字符
  - 中括号`[]`文件扩展匹配
    - `[ai]` 代表文件名中有a或i
    - `[a - i]` 代表文件名中有a到i中的任意字符
    - `[!a]` 代表排除文件名中包含a的文件 
  
`touch` 命令创建空文件

**`cp ` 命令复制文件**  
基本用法：  
`cp source destination`  
- source是文件时，会在destination生成新文件
- destination 末尾最好加上`/`，末尾没有`/`且目录不存在，会创建destination目录
- `-i` 参数，询问是否覆盖已有文件
- `-R` 参数，递归复制整个目录的内容
  
**`mv` 命令移动或重命名  **  

**`rm` 命令**
- `-i` 参数，确认是否删除
- `-f` 参数，强制删除，忽略提示信息
- `-r` 参数，删除目录时递归删除所有子目录和文件
- `-rf`参数，删除目录及所有内容（危险）

**`mkdir` 命令创建目录**
- `-p` 参数用于一次创建多级目录
- `rmdir` 命令用于删除空目录(安全，目录不是空的时候会报错) 

---

### 查看文件内容

**`file` 命令查看文件类型**  

**`cat` 命令显示文本文件的所有内容**
- `-n` 参数，给所有行加行号 
- `-b` 参数，给有文本的行加行号
- 运行后无法控制，显示完所有内容才会停止  

**`more` 命令分页显示文本文件内容**
- 显示每页数据后停下来，空格键显示下一页，q键退出   

**`less` 命令**
- 比 `more` 命令功能丰富，支持上下键翻页  

**`tail` 命令查看部分文件**
- `-n` 参数，指定显示末尾行数
- `-f` 参数，动态展示末尾行数，监控日志
